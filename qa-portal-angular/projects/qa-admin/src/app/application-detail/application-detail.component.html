<h1>Application</h1>

<mat-card class="mb-1">
    <mat-card-header>
        <mat-card-title>Details</mat-card-title>
    </mat-card-header>
    <form [formGroup]="appForm">
        <mat-card-content>
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" required>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Description</mat-label>
                <input matInput formControlName="description" required>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100 mb-1">
                <mat-label>Base URL</mat-label>
                <input matInput formControlName="baseUrl" required>
                <mat-hint>
                    <mat-icon color="warn">warning</mat-icon> Changing this will affect routing
                </mat-hint>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Display Order</mat-label>
                <input matInput formControlName="displayOrder" type="number" required>
            </mat-form-field>
        </mat-card-content>
    </form>
</mat-card>

<mat-card class="mb-1">
    <mat-card-header>
        <mat-card-title>Associated Projects</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <mat-action-list class="qa-action-list">
            <button mat-list-item *ngFor="let project of app?.portalProjects" (click)="onProjectClicked(project)">{{project.name}}</button>
        </mat-action-list>
    </mat-card-content>
</mat-card>

<button mat-flat-button color="accent" class="w-100 mt-1" (click)="onSaveAppClicked()"
    [disabled]="isLoading || appForm.invalid || appForm.pristine">Update</button>

<app-spinner-overlay [show]="isLoading" fadeBg="true"></app-spinner-overlay>